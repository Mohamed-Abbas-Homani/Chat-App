import React, { useState, useEffect } from "react";
import {
  EmojiPickerWrapper,
  EmojiButton,
  CategoryWrapper,
  CategoryButton,
  EmojisWrapper,
} from "./Style";
import { FaSmile, FaPaw, FaUtensils, FaFutbol, FaPlane, FaLightbulb, FaHeart, FaFlag, FaUser, FaTree, FaTh, FaCalculator } from "react-icons/fa";

const emojis = {
  smileys: [
    "😀", "😃", "😄", "😁", "😆", "😅", "😂", "🤣", "😊", "😇", "🙂", "🙃", "😉", "😌", "😍", "🥰", "😘", "😗", "😙", "😚", "😋", "😛", "😝", "😜", "🤪", "🤨", "🧐", "🤓", "😎", "🤩", "😏", "😒", "😞", "😔", "😟", "😕", "🙁", "☹️", "😣", "😖", "😫", "😩", "🥺", "😢", "😭", "😤", "😠", "😡", "🤬", "🤯", "😳", "🥵", "🥶", "😱", "😨", "😰", "😥", "😓", "🤗", "🤔", "🤭", "🤫", "🤥", "😶", "😐", "😑", "😬", "🙄", "😯", "😦", "😧", "😮", "😲", "🥱", "😴", "🤤", "😪", "😵", "🤐", "🥴", "🤢", "🤮", "🤧", "😷", "🤒", "🤕", "🤑", "🤠", "😈", "👿", "👹", "👺", "🤡", "💩", "👻", "💀", "☠️", "👽", "👾", "🤖", "🎃", "😺", "😸", "😹", "😻", "😼", "😽", "🙀", "😿", "😾",
  ],
  animals: [
    "🐵", "🐒", "🦍", "🦧", "🐶", "🐕", "🦮", "🐕‍🦺", "🐩", "🐺", "🦊", "🦝", "🐱", "🐈", "🐈‍⬛", "🦁", "🐯", "🐅", "🐆", "🐴", "🐎", "🦄", "🦓", "🦌", "🦬", "🐮", "🐂", "🐃", "🐄", "🐷", "🐖", "🐗", "🐽", "🐏", "🐑", "🐐", "🐪", "🐫", "🦙", "🦒", "🐘", "🦣", "🦏", "🦛", "🐭", "🐁", "🐀", "🐹", "🐰", "🐇", "🐿️", "🦫", "🦔", "🦇", "🐻", "🐨", "🐼", "🦥", "🦦", "🦨", "🦘", "🦡", "🐾", "🦃", "🐔", "🐓", "🐣", "🐤", "🐥", "🐦", "🐧", "🕊️", "🦅", "🦆", "🦢", "🦉", "🦩", "🦚", "🦜", "🐸", "🐊", "🐢", "🦎", "🐍", "🐲", "🐉", "🦕", "🦖", "🐳", "🐋", "🐬", "🐟", "🐠", "🐡", "🦈", "🐙", "🐚", "🐌", "🦋", "🐛", "🐜", "🐝", "🐞", "🦗", "🕷️", "🕸️", "🦂", "🦟", "🦠", "💐", "🌸", "💮", "🏵️", "🌹", "🥀", "🌺", "🌻", "🌼", "🌷", "🌱", "🌲", "🌳", "🌴", "🌵", "🌾", "🌿", "☘️", "🍀", "🍁", "🍂", "🍃", "🍄", "🌰", "🦀", "🦞", "🦐", "🦑", "🌍", "🌎", "🌏", "🌐", "🌑", "🌒", "🌓", "🌔", "🌕", "🌖", "🌗", "🌘", "🌙", "🌚", "🌛", "🌜", "☀️", "🌝", "🌞", "🪐", "⭐", "🌟", "🌠", "🌌", "☁️", "⛅", "⛈️", "🌤️", "🌥️", "🌦️", "🌧️", "🌨️", "🌩️", "🌪️", "🌫️", "🌬️", "🌀", "🌈", "🌂", "☂️", "☔", "⛱️", "⚡", "❄️", "☃️", "⛄", "☄️", "🔥", "💧", "🌊",
  ],
  food: [
    "🍇", "🍈", "🍉", "🍊", "🍋", "🍌", "🍍", "🥭", "🍎", "🍏", "🍐", "🍑", "🍒", "🍓", "🫐", "🥝", "🍅", "🫒", "🥥", "🥑", "🍆", "🥔", "🥕", "🌽", "🌶️", "🫑", "🌰", "🥒", "🥬", "🥦", "🧄", "🧅", "🍄", "🥜", "🌰", "🍞", "🥐", "🥖", "🫓", "🥨", "🥯", "🥞", "🧇", "🧀", "🍖", "🍗", "🥩", "🥓", "🍔", "🍟", "🍕", "🌭", "🥪", "🌮", "🌯", "🫔", "🥙", "🧆", "🥚", "🍳", "🥘", "🍲", "🫕", "🥣", "🥗", "🍿", "🧈", "🧂", "🥫", "🍱", "🍘", "🍙", "🍚", "🍛", "🍜", "🍝", "🍠", "🍢", "🍣", "🍤", "🍥", "🥮", "🍡", "🥟", "🥠", "🥡", "🦪", "🍦", "🍧", "🍨", "🍩", "🍪", "🎂", "🍰", "🧁", "🥧", "🍫", "🍬", "🍭", "🍮", "🍯", "🍼", "🥛", "☕", "🫖", "🍵", "🍶", "🍾", "🍷", "🍸", "🍹", "🍺", "🍻", "🥂", "🥃", "🥤", "🧃", "🧉", "🧊", "🥢", "🍽️", "🍴", "🥄",
  ],
  activity: [
    "⚽️", "🏀", "🏈", "⚾️", "🎾", "🏐", "🏉", "🎱", "🏓", "🏸", "🏒", "🏑", "🏏", "🪀", "🎣", "🤿", "🎽", "🛹", "🛷", "⛸️", "🥌", "🎿", "⛷️", "🏂", "🏋️‍♂️", "🏋️‍♀️", "🤼‍♂️", "🤼‍♀️", "🤸‍♂️", "🤸‍♀️", "⛹️‍♂️", "⛹️‍♀️", "🤺", "🤾‍♂️", "🤾‍♀️", "🏌️‍♂️", "🏌️‍♀️", "🏇", "🧘‍♂️", "🧘‍♀️", "🏄‍♂️", "🏄‍♀️", "🏊‍♂️", "🏊‍♀️", "🤽‍♂️", "🤽‍♀️", "🚣‍♂️", "🚣‍♀️", "🧗‍♂️", "🧗‍♀️", "🚵‍♂️", "🚵‍♀️", "🚴‍♂️", "🚴‍♀️", "🏇", "🛹", "🛼", "🎮", "🎳", "🏸", "🏓", "🏏", "🥅", "🏒", "🥌", "🎿", "🛷", "⛷️", "🏂", "🤿", "🎣",
  ],
  travel: [
    "✈️", "🚗", "🚕", "🚙", "🚌", "🚎", "🏎️", "🚓", "🚑", "🚒", "🚃", "🚝", "🚄", "🚅", "🚀", "🚢", "🚁", "🚂", "🚇", "🚊", "🚖", "🛴", "🚲", "🛵", "🛸", "🛶", "🚤", "⛵", "🛳️", "🚠", "🚡", "🚟", "🛩️", "🛬", "🛫", "💺", "🛰️", 
  ],
  objects: [
    "💡", "🔦", "🏮", "📺", "📻", "📱", "💻", "⌨️", "🖥️", "🖨️", "⏰", "⏳", "📅", "📚", "🔖", "🛒", "💎", "🔨", "🎸", "🧸", "🎈", "🎁", "🛍️", "🎀", "🎮", "🎱", "🎯", "🎳", "🎣", "🧩", "🧵", "🧶", "🎨", "🖼️", "🎻", "🎺", "🎷", "🥁", "🎬", "🏹", "🔮", "🎥", "📷", "📸", "📹", "📼", "🔍", "🔎", "🕯️", "💸", "💰", "💳", "💲", "💱", "🛠️", "🔧", "🔩", "🔗", "⛓️", "🧰", "⚙️", "🔑", "🗝️", "🔐", "🔒", "🔓", "🚪", "🛎️", "🔔", 
  ],
  symbols: ["❤️", "💔", "❣️", "💕", "💞", "💓", "💗", "💖", "💘", "💝", "🔷", "🔶", "🔺", "🔲", "🔳", "🛑", "⚠️", "🚸", "🚦", "🚧", "⛔", "🚫", "🚭", "💯", "🔱", "🔰", "🎴", "🀄", "🃏", "🔞", "♦️", "♣️", "♥️", "♠️", "🔅", "🔆", "🛑", "⚠️", "🔵", "🔴", "🟢", "🟠", "🟡", "🟣", "🟤", "⚫", "⚪", "🔘", "⚪️", "🔘️", "◽", "◾", "⬛", "⬜", "🔳", "🔲", "🔶", "🔷", "🔸", "🔹", "🔺", "🔻", "🔲", "🔳", "🔴", "🔵", "🟢", "🟠", "🟡", "🟣", "🟤", "⚫", "⚪", "🔘", "⚪️", "🔘️", "◽", "◾", "⬛", "⬜", "🔳", "🔲"],
  flags: [
    "🏁", "🚩", "🎌", "🏴", "🏳️", "🏴‍☠️", "🇦🇫", "🇦🇱", "🇩🇿", "🇦🇩", "🇦🇴", "🇦🇮", "🇦🇬", "🇦🇷", "🇦🇲", "🇦🇺", "🇦🇹", "🇦🇿", "🇧🇸", "🇧🇭", "🇧🇩", "🇧🇧", "🇧🇾", "🇧🇪", "🇧🇿", "🇧🇯", "🇧🇲", "🇧🇹", "🇧🇴", "🇧🇦", "🇧🇼", "🇧🇷", "🇧🇳", "🇧🇬", "🇧🇫", "🇧🇮", "🇰🇭", "🇨🇲", "🇨🇦", "🇨🇻", "🇨🇫", "🇹🇩", "🇨🇱", "🇨🇳", "🇨🇴", "🇰🇲", "🇨🇬", "🇨🇩", "🇨🇷", "🇨🇮", "🇭🇷", "🇨🇺", "🇨🇾", "🇨🇿", "🇩🇰", "🇩🇯", "🇩🇲", "🇩🇴", "🇪🇨", "🇪🇬", "🇸🇻", "🇬🇶", "🇪🇷", "🇪🇪", "🇪🇹", "🇫🇯", "🇫🇮", "🇫🇷", "🇬🇫", "🇬🇦", "🇬🇲", "🇬🇪", "🇩🇪", "🇬🇭", "🇬🇷", "🇬🇩", "🇬🇹", "🇬🇳", "🇬🇼", "🇬🇾", "🇭🇹", "🇭🇳", "🇭🇺", "🇮🇸", "🇮🇳", "🇮🇩", "🇮🇷", "🇮🇶", "🇮🇪", "🇮🇹", "🇯🇲", "🇯🇵", "🇯🇴", "🇰🇿", "🇰🇪", "🇰🇮", "🇰🇵", "🇰🇷", "🇰🇼", "🇰🇬", "🇱🇦", "🇱🇻", "🇱🇧", "🇱🇸", "🇱🇷", "🇱🇾", "🇱🇮", "🇱🇹", "🇱🇺", "🇲🇬", "🇲🇼", "🇲🇾", "🇲🇻", "🇲🇱", "🇲🇹", "🇲🇭", "🇲🇶", "🇲🇷", "🇲🇺", "🇲🇽", "🇫🇲", "🇲🇩", "🇲🇨", "🇲🇳", "🇲🇪", "🇲🇦", "🇲🇿", "🇲🇲", "🇳🇦", "🇳🇷", "🇳🇵", "🇳🇱", "🇳🇿", "🇳🇮", "🇳🇪", "🇳🇬", "🇳🇺", "🇳🇫", "🇲🇰", "🇲🇵", "🇳🇴", "🇴🇲", "🇵🇰", "🇵🇼", "🇵🇸", "🇵🇦", "🇵🇬", "🇵🇾", "🇵🇪", "🇵🇭", "🇵🇱", "🇵🇹", "🇵🇷", "🇶🇦", "🇷🇴", "🇷🇺", "🇷🇼", "🇰🇳", "🇱🇨", "🇻🇨", "🇼🇸", "🇸🇲", "🇸🇹", "🇸🇦", "🇸🇳", "🇷🇸", "🇸🇨", "🇸🇱", "🇸🇬", "🇸🇰", "🇸🇮", "🇸🇧", "🇸🇴", "🇿🇦", "🇸🇸", "🇪🇸", "🇱🇰", "🇸🇩", "🇸🇷", "🇸🇪", "🇨🇭", "🇸🇾", "🇹🇼", "🇹🇯", "🇹🇿", "🇹🇭", "🇹🇱", "🇹🇬", "🇹🇴", "🇹🇹", "🇹🇳", "🇹🇷", "🇹🇲", "🇹🇻", "🇺🇬", "🇺🇦", "🇦🇪", "🇬🇧", "🇺🇸", "🇺🇾", "🇺🇿", "🇻🇺", "🇻🇦", "🇻🇪", "🇻🇳", "🇾🇪", "🇿🇲", "🇿🇼",
  ],
  math:  [
    "+", "-", "÷", "÷", "=", "$", "%", "^", "&", "*", "()", "#", "/", "/", "∼", ".", ",", ":", ";", "'", '"',
    "[", "]", "{", "}", "|", "\\", "∓", "±", "∔", "π", "α", "β", "θ", "λ", "σ", "φ", "Δ", "Σ", "Ω", "Π", "≤", "≥",
    "≦", "≧", "≃", "≈", "≏", "∘", "∙", "√", "∛", "∜", "∝", "<", ">", "∑", "⋀", "⋁", "⋂", "⋃", "⨀", "∞", "⁰",
    "¹", "²", "³", "⁴", "⁵", "⁶", "⁷", "⁸", "⁹", "½", "⅓", "⅔", "¼", "¾", "⅕", "⅖", "⅗", "⅘", "⅙", "⅚", "⅐",
    "⅛", "⅜", "⅝", "⅞", "⅑", "⅒", "≂", "≐", "≠", "≡", "≢", "⊂", "⊃", "⊄", "⊅", "⊆", "⊇", "⊈", "⊉", "⊊",
    "⊋", "⊏", "⊐", "∆", "∇", "∫", "∬", "∭", "∮", "∊", "⊿", "⊾", "∿", "Ω", "℧", "①", "②",
    "③", "④", "⑤", "⑥", "⑦", "⑧", "⑨", "❶", "❷", "❸", "❹", "❺", "❻", "❼", "❽", "❾"
  ],
  kaomojis: [
    "◉‿◉", "(◍•ᴗ•◍)✧*。", "(╹.̮╹)", "(◜‿◝)", "(˘︶˘).｡*♡", "(◍•ᴗ•◍)", "(≧◡≦)", "(✿◠‿◠)", "(◕‿◕✿)",
    "(ﾉ◕ヮ◕)ﾉ*:･ﾟ✧", "(¬‿¬)", "(*^‿^*)", "(´｡• ω •｡`)", "( ͡° ͜ʖ ͡°)", "( ͡ᵔ ͜ʖ ͡ᵔ )", "(づ｡◕‿‿◕｡)づ", 
    "(~‾▿‾)~", "( ͡o‿O͡)", "( ͡ಠ ʖ̯ ͡ಠ)", "( ͡ಠ‿ ͡ಠ )", "(╯°□°）╯︵ ┻━┻", "┻━┻ ︵ヽ(`Д´)ﾉ︵ ┻━┻",
    "(✧ω✧)", "(ಠ_ಠ)", "(ಠ‿ಠ)", "(｡♥‿♥｡)", "(⌐■_■)", "(´･_･`)", "(╯︵╰,)", "（＾_＾）", "(｡◕‿◕｡)", 
    "ヽ(´▽｀)ノ", "(≧ω≦)", "(●´ω｀●)", "(*≧ω≦)", "⊂(・﹏・⊂)", "(´•ω•`)", "(๑•̀ㅂ•́)و✧", "(*>_<*)", 
    "(T_T)", "(＾▽＾)", "(o_O)", "ヽ(^o^)丿", "(>_<)", "(¬‿¬)", "(◕ᴥ◕)", "(｡･ω･｡)", "(♥ω♥*)", "(´･ω･`)", 
    "(⌒_⌒;)", "(╯︵╰,)", "(*^-^*)", "¯\\_(ツ)_/¯", "(✿╹◡╹)", "(๑•ᴗ•๑)", "(⁄ ⁄•⁄ω⁄•⁄ ⁄)", "(っ◔◡◔)っ"
  ],
};

const categories = [
  { name: "smileys", icon: <FaSmile /> },
  { name: "animals", icon: <FaPaw /> },
  { name: "food", icon: <FaUtensils /> },
  { name: "activity", icon: <FaFutbol /> },
  { name: "travel", icon: <FaPlane /> },
  { name: "objects", icon: <FaLightbulb /> },
  { name: "symbols", icon: <FaHeart /> },
  { name: "flags", icon: <FaFlag /> },
  { name: "math", icon: <FaCalculator /> },
  { name: "kaomojis", icon: <FaTh /> } 
];

const EmojiPicker = ({ onSelect }) => {
  const [selectedCategory, setSelectedCategory] = useState("smileys");
  const [multiSelect, setMultiSelect] = useState(false);
  const [selectedEmojis, setSelectedEmojis] = useState([]);

  useEffect(() => {
    const handleDocumentKeyDown = (e) => {
      if (e.key === "Shift") {
        setMultiSelect(true);
      }
    };

    const handleDocumentKeyUp = (e) => {
      if (e.key === "Shift") {
        setMultiSelect(false);
        if (selectedEmojis.length > 0) {
          onSelect(selectedEmojis.join(" "));
          setSelectedEmojis([]);
        }
      }
    };

    document.addEventListener("keydown", handleDocumentKeyDown);
    document.addEventListener("keyup", handleDocumentKeyUp);

    return () => {
      document.removeEventListener("keydown", handleDocumentKeyDown);
      document.removeEventListener("keyup", handleDocumentKeyUp);
    };
  }, [selectedEmojis, onSelect]);

  const handleEmojiClick = (emoji) => {
    if (multiSelect) {
      setSelectedEmojis((prev) => [...prev, emoji]);
    } else {
      onSelect(emoji);
    }
  };

  return (
    <EmojiPickerWrapper>
      <CategoryWrapper>
        {categories.map((category) => (
          <CategoryButton
            key={category.name}
            $active={selectedCategory === category.name}
            onClick={() => setSelectedCategory(category.name)}
          >
            {category.icon}
          </CategoryButton>
        ))}
      </CategoryWrapper>
      <EmojisWrapper>
        {emojis[selectedCategory].map((emoji, index) => (
          <EmojiButton $isKaomoji={selectedCategory=="kaomojis"} key={index} onClick={() => handleEmojiClick(emoji)}>
            {emoji}
          </EmojiButton>
        ))}
      </EmojisWrapper>
    </EmojiPickerWrapper>
  );
};

export default EmojiPicker;
